{% load static %}
{% comment %}
Mobile-Optimized File Upload Interface Component
Usage: {% include 'includes/file_upload.html' with tool=tool_object %}
{% endcomment %}

<div class="file-upload-container">
    <!-- Upload Zone -->
    <div class="file-upload-zone" id="fileUploadZone" 
         data-max-size="{{ tool.max_file_size_mb }}"
         data-accepted-formats="{{ tool.supported_formats|join:',' }}"
         aria-label="File upload area">
        
        <div class="file-upload-icon" aria-hidden="true">
            <i class="fas fa-cloud-upload-alt"></i>
        </div>
        
        <div class="file-upload-text">
            Drag & Drop Your File Here
        </div>
        
        <div class="file-upload-hint">
            or <strong>tap to browse</strong> from your device
            <br>
            Maximum file size: <strong>{{ tool.max_file_size_mb }}MB</strong>
        </div>
        
        <button type="button" class="file-upload-browse-btn" id="browseFilesBtn">
            <i class="fas fa-folder-open"></i>
            <span>Browse Files</span>
        </button>
        
        <input type="file" 
               id="fileInput" 
               class="file-input"
               accept="{{ tool.supported_formats|join:',' }}"
               aria-label="File input">
    </div>
    
    <!-- Supported Formats Info -->
    {% if tool.supported_formats %}
    <div class="file-format-info">
        <div class="file-format-info-title">
            <i class="fas fa-info-circle"></i> Supported Formats
        </div>
        <div class="file-format-list">
            {% for format in tool.supported_formats %}
            <span class="file-format-badge">{{ format|upper }}</span>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Selected File Display (Hidden by default) -->
    <div class="file-selected" id="fileSelected" style="display: none;">
        <div class="file-selected-header">
            <div class="file-selected-info">
                <div class="file-icon">
                    <i class="fas fa-file" id="fileIconType"></i>
                </div>
                <div class="file-details">
                    <div class="file-name" id="fileName">filename.pdf</div>
                    <div class="file-size" id="fileSize">0 MB</div>
                </div>
            </div>
            <button type="button" class="file-remove-btn" id="fileRemoveBtn" aria-label="Remove file">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <!-- Upload Progress -->
        <div class="upload-progress" id="uploadProgress" style="display: none;">
            <div class="upload-progress-header">
                <span class="upload-progress-label">Uploading...</span>
                <span class="upload-progress-percentage" id="uploadPercentage">0%</span>
            </div>
            <div class="upload-progress-bar-container">
                <div class="upload-progress-bar" id="uploadProgressBar" style="width: 0%"></div>
            </div>
        </div>
        
        <!-- Upload Status -->
        <div class="upload-status success" id="uploadStatus" style="display: none;">
            <i class="fas fa-check-circle upload-status-icon"></i>
            <span id="uploadStatusText">File uploaded successfully!</span>
        </div>
    </div>
    
    <!-- Error Message -->
    <div class="file-upload-error" id="fileUploadError" style="display: none;">
        <i class="fas fa-exclamation-triangle file-upload-error-icon"></i>
        <span id="fileUploadErrorText">Error message here</span>
    </div>
    
    <!-- Convert Button -->
    <button type="button" class="convert-btn" id="convertBtn" style="display: none;" disabled>
        <i class="fas fa-sync-alt convert-btn-icon"></i>
        <span>Convert File</span>
    </button>
</div>

<!-- Include the file upload JavaScript -->
<script src="{% static 'js/file-upload.js' %}" defer></script>
